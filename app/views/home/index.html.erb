<%= render "shared/pixel" %>
<div class="flex flex-wrap grow p-3 bg-slate-300 border border-violet-400"
  data-controller="hashes" data-hashes=<%= session['hashes'] || "{}" %> data-signin=<%= current_user ? true : false %>>
  <div class="p-3 m-2 border border-red-400">
    <h1 class="font-bold text-4xl">Home#index</h1>
    <p>Find me in app/views/home/index.html.erb</p>
    <% if current_user %>
      <p><%= link_to "登出", destroy_user_session_path, data: { turbo_method: :delete } %></p>
    <% else %>
      <p><%= link_to "註冊", new_user_registration_path %></p>
      <p><%= link_to "登入", new_user_session_path %></p>
      <p><%= link_to "註冊", new_user_registration_path(ref: "Purchase") %></p>
    <% end %>
  </div>
  <div class="p-3 m-2 grow flex justify-center xl:grow-0 xl:block">
    <% if current_user %>
      <div><%= link_to "add short link",
          new_link_path,
          class: %w(border-2 p-2 cursor-pointer hover:underline) %>
      </div>
    <% else %>
      <%= render "links/form_lite", link: @link %>
    <% end %>
  </div>
  <div class="grow xl:w-1/3 p-3 m-2 border border-blue-400">
    <%= render "links/links", links: @links if current_user %>
    <%= render "links/links_from_hashes", links: ActiveSupport::JSON.decode(session['hashes'] || "[]") %>
  </div>
</div>
<div class="min-w-max">
  <p><%= link_to "add short link",
          new_link_path,
          class: %w(border-2 p-2 cursor-pointer hover:underline) %>
  </p>
</div>
<%= render "links/links", links: @links %>
